---
title: vpn（三）openvpn
date: 2018-04-20 11:39:34
tags:
	- vpn

---



下面参考bomb250的https://blog.csdn.net/dog250/article/details/5588607系列文章进行总结。

vpn能够建立起来，其理论基础是协议栈的分层模型。

理论上，任何层次的数据，都可以被承载在其他的任何层次或者当前的层次上。

所以就有了各种A over B。例如PPPoE。就是PPP数据放在同层的Ethernet上。

这些over模型，根据层次直接的关系，可以分为这几种：

1、A 层次高于B。就是正常的tcpip模型了。

2、A层次等于B。PPPoE就是这种。ipsec也是这种。

3、A层次低于B。ip over ssl就是这种。



理论上已经合理的ip over ssl，还需要一些额外的技术支撑才能使用。

必须想办法让一个ip包原封不动地被ssl再封装一次。

这个动作不可能在原始的标准协议栈里完成的。

因为标准协议栈不支持双向的数据流动的。

那么一个解决方法就是修改协议栈。

在ip层之下实现一个轻量级的ssl协议层，但是这样有回到了ipsec的老路上来了。

所以这种方法是不可取的。

现在要解决的问题是：如何让ip数据包重新流到应用层。

我们让数据继续流向一张虚拟网卡就好了。然后封装一下，再继续流向物理网卡。



openvpn就是基于ip over ssl的思想来实现的。



对称的互联就用IPSec VPN，C/S的互联就用SSL VPN，这条原则在大多数场合适用。