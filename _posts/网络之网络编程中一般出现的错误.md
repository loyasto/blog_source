---
title: 网络之网络编程中一般出现的错误
date: 2017-11-02 21:51:03
tags:
	- 网络

---



说到错误，一般是说tcp通信的。

1、通信的一方主动退出。

例如exit、ctrl+c、挂掉。这时候内核没有挂掉的。内核会帮忙做些事情。

​	1）关闭所有句柄，给对方发FIN。如果设置了LINGER为开的话，是给对方发RST。

​	2）对方收到FIN的话，recv返回0，表示对端结束。

​		对方收到RST的话，recv返回-1，表示对端错误。错误码是connection reset by peer。

​		如果对方是在send的话，对方会收到一个SIGPIPE。

2、通信的一方内核都挂了。或者网线被拔掉了。

​	发送数据的一方，会进行重传。

3、服务器主机崩溃后重启了。

​	之前的tcp连接信息已经丢失了。所以对客户端的请求就用RST来回复。



