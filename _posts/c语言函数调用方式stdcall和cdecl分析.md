---
title: c语言函数调用方式stdcall和cdecl分析
date: 2017-02-18 13:07:42
tags:
	- 调用
---
`__stdcall`和`__cdecl`都是函数调用的约定关键字。
都是从右向左把参数压入到堆栈，区别在于：stdcall方式由实现函数来清理堆栈，而cdecl由调用者来负责清理堆栈。
默认都是cdecl的方式的。


参数的传递和函数返回值这个课题在C和汇编混合编程的时候非常关键。在bootloader编程及内核移植等工作需要这个知识。

arm属于risc指令集，x86属于cisc指令集，都是各自架构的典型代表。

总的来说，risc倾向于通过寄存器来传递参数，而cisc倾向于通过堆栈传递参数。
返回值都是通过效率最高的寄存器来完成，arm里用R0，x86里用EAX。

下面重点看arm的。arm在参数个数4个寄存器放不下的时候，也只能选择通过堆栈来传递。


