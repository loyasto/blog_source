---
title: 叮当开源智能音箱在树莓派上的安装使用
date: 2017-11-13 20:39:16
tags:
	- 智能音箱

---



最近对智能音箱产生了兴趣，网上搜索，很容易就找到了叮当智能音箱这个开源项目。这个项目基于JasperProject做的，添加了很多的国内的相关支持，例如计入讯飞语言的支持等等。叮当可以在树莓派上跑。我刚好有一块树莓派3的板子。现在就试试看。

# 0.硬件准备

树莓派带了3.5mm的耳机孔，所以声音输出可以直接接音箱。

输入就麻烦一点，你得自己买一个USB的麦克风阵列。看了作者推荐的，就PS3 Eye这个便宜而且容易购买。

就买这个了。淘宝上买25元。现在下单了，估计要过几天才能到。

但是我仔细一看，我的USB摄像头其实就是已经带了音频采集的。我试了一下，可以进行录像和录音的。把淘宝的退了。

# 1.下载镜像

在这里https://github.com/wzpan/dingdang-robot/wiki/changelog 查看这个项目的修改记录。可以发现最新的版本是添加了对ReSpeaker的支持，但是我没有ReSpeaker的板子。所以就选择`dingdang-2017-10-29`这个版本。

从修改记录里可以看到，这个版本是预览版。

这个版本的特点有：

1、基于了最新的Raspbian Stretch系统。

2、增加了讯飞和阿里的语言识别和合成。默认使用讯飞的。

3、增加了Emotibot机器人，作为默认的聊天机器人。

4、支持USB摄像头。我刚好也有一个。很好。

另外，其实可以使用手动安装的方法的，但是我先降低难度，先全部用镜像的方式跑通。

# 2. 安装镜像

我的日常树莓派系统是安装在U盘里的，另外有一张用来安装系统的SD卡，所以还是选择用SD卡的方式进行安装，最方便快捷。

安装方法就是跟树莓派的系统安装方法一样。

下载大概20分钟。解压几分钟，烧录镜像几分钟。

我把系统烧录到板端，出现问题是，系统起不来。这个系统是带桌面的系统。既然跑不起来，我就选择手动安装的方法。

## 2.1 手动安装

1、我不升级我的系统了。我的Raspbian还是Jessie的。

2、执行这个命令：

```
sudo apt-get install  libasound2-dev libportaudio-dev python-pyaudio libatlas-base-dev python-pymad  uuid-dev  libav-tools --yes
```

报了一些错误。我先不管。继续往下走。

3、

# 3. 升级脚本

相关脚本在/home/pi/dingdang目录下。在该目录下用git pull升级一下。

# 4. 配置

配置文件在`/home/pi/.dingdang/profile.yml`。

修改后要重启机器生效。

