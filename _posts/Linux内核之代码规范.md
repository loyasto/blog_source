---
title: Linux内核之代码规范
date: 2018-03-23 18:16:52
tags:
	- Linux内核

---



读linux源代码，对于接口和变量的命名觉得有点晕。尤其下划线。没有找到规律。

现在把这份官方文档分析一下，总结规律，方便指导自己阅读代码。

https://www.kernel.org/doc/html/v4.13/translations/zh_CN/coding-style.html

# 缩进

8个空格。

理由的层次明显，而且可以强迫你不要把代码写得超过三层嵌套。

行尾不要有空格。编辑器会帮你自动干掉。

# 大括号的位置

跟我喜欢的一样。没什么说的。

为什么要这种风格？

```
不过所有思维健全的人 都知道 (a) K&R 是 正确的 并且 (b) K&R 是正确的。
```

我们就跟随创始人的风格吧。



# 命名

局部变量，简单最好。

例如，用i，而不是loop_counter。这个长名字毫无意义。

# typedef

原则是尽量别用。

我是这么认为的。

# 注释

不要过度注释。

不要在注释里解释你的代码是如何运行的。应该让代码易读。

多行注释的风格是：

```
/*
 * xxxx
 * xxxx
 */
```

# 内核宏

不要重新发明新的内核宏。常用的都在linux/kernel里了。



