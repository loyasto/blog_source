---
title: mqtt了解
date: 2017-09-18 21:49:15
tags:
	- iot
	- mqtt

---



mqtt是Message Queues Telemetry Transport的缩写。表示消息队列遥测传输。

mqtt是和http在同一层的应用层协议。http协议的请求回答模式对于物联网应用不太适用。mqtt使用的是发布订阅模式。

http是基于文本的，mqtt是基于二进制的。

mqtt规范很简单，最早是由IBM提出的，很适合低功耗和带宽有限的iot应用场景。

例如：遥感数据、汽车、智能家居等。

mqtt的设计遵循下面的原则：

1、精简，可有可无的东西不要。

2、采用发布订阅模式。

3、允许用户动态创建主题，零运维成本。

4、把传输量降到最低。

5、把网络慢、不稳定这些因素充分考虑。

6、支持连续的会话控制。

7、理解客户端的计算能力很低。

8、提供质量服务管理。QoS。

9、假设数据不可知，不强求传输数据的类型与格式，保持灵活性。



# 1. 发布/订阅模式

与请求/回答这种同步模式不同，发布/订阅模式解耦了生产者和消费者的关系。

发布订阅模式，就是你把一个消息贴到公布栏一样。你不用关系谁会去看，谁关心谁自己去看。

这是编程中很常见的一种设计模式。带来了下面的好处。

你不需要关心有多少用户。你把消息贴出去就好了。用户也不需要知道谁生产的消息，只需要知道公布栏的位置就好。这对通信的主体带来了很大的解放。



# 2. mqtt协议在协议栈上的位置

是在tcp之上的应用层。

传统上我们网络通信，都是自己基于socket来做。因为这个是一个重复造轮子的过程。mqtt封装了socket操作，帮我们做了很多的工作。直接用比我们自己写要好。



# 3. mqtt的实际应用有哪些？

国内有家创业公司，叫云吧，在做相关的工作。例如集成在某些App里的聊天功能，App的消息推送。

可以自己用Python和mqtt来写一个简单的聊天应用。



