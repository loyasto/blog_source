---
title: Linux之sysfs了解
date: 2018-01-28 18:52:43
tags:
	- Linux
	- sysfs

---



sysfs跟proc类似，都是提供了一种从shell访问内核数据的方式。但是sysfs会比proc更好一些。其中最重要的一点就是设计上更加清晰。

proc里的文件格式各不相同，用户程序读取后，可能要进行字符串解析，才能取得有效信息。

而sysfs的设计原则是：一个属性文件只做一件事情。里面只有一个值。



对于驱动开发者，如果想要把驱动跟用户程序建立连接，可以选择的方法有：

1、注册cdev设备。ioctl来设置属性。但是无法在脚本里用。

2、注册proc。

3、注册sysfs。

不过一般是这3个都做的。proc可以选择不做了。

sysfs需要增加的代码最少。可维护性也最好。

一般最少是需要cdev设备的。其他两个是补充性的。

