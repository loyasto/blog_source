---
title: tcp之定时器分析
date: 2017-10-31 20:18:26
tags:
	- tcp

---



tcp协议里使用了4种定时器。

1、重传定时器。

发送一段报文的时候，就启动了这个定时器，会有2种情况，一是超时之前收到确认，这是正常情况，就把定时器取消掉，二是超时，超时就把报文重传，并把定时器复位。

重传时间是2*RTT，RTT是一个动态调整的时间。

2、坚持定时器。

这个定时器是为了解决零窗口问题。

当sender收到零窗口的确认时，就启动这个坚持定时器。时间到的时候，sender发送一个特殊的tcp报文，叫做探测报文，这个报文只有一个字节的数据。

3、保活定时器。

一般是2个小时，如果两个小时client都没有任何动静，都把链接断开。

4、时间等待定时器。



