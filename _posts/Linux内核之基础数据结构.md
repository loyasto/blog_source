---
title: Linux内核之基础数据结构
date: 2018-04-04 14:46:37
tags:
	- Linux内核

---



跟其他的大型项目一样，linux内核里也实现了一些通用数据结构，并且提倡大家在开发的时候使用。

大家进来用内核提供的数据结构，不要自己去造轮子。

主要有这4种：

1、链表。

2、队列。

3、映射。

4、二叉树。



# 链表

链表是内核里最简单、最普通的数据结构。

因为双向环形链表提供了最大的灵活性，内核里的标准链表就是双向环形链表。

## 在链表里的移动

只是线性移动。

先访问某个元素，然后再通过next指针访问下一个元素。

如果要实现随机访问，那么就不要用链表。

使用链表的场景是：

1、需要遍历所有数据。

2、需要动态增删元素。

## linux里的链表实现

跟我们一般的用法不同。

我们一般是把数据塞入到链表，linux是把linux塞入到其他结构体里。

定义在linux/list.h里。

```
struct list_head {
  struct list_head *next;
  struct list_head *prev;
};
```

## 链表的操作

1、定义



# 队列

任何OS内核都少不了一种编程模型：生产者和消费者。

内核里的通用消息队列实现是kfifo。

