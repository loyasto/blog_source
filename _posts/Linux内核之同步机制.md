---
title: Linux内核之同步机制
date: 2018-03-26 18:55:21
tags:
	- Linux

---



### 1. 什么是内核同步机制？

同步是指内核控制多个进程按照一定的规则或者顺序访问特定资源的机制。

同步机制是内核稳定和效率的重要基础设施。

### 2. 为什么需要同步机制？

当os引入进程的概念，进程成为调度的实体之后，系统就具备了并发执行多个进程的能力。

但是这也同时引入了各个进程直接的资源竞争和共享的问题。

另外，中断、异常这些的引入，导致各个进程的执行相互交错，如果不对共用的资源进行同步，势必会导致系统崩溃。

### 3. 系统中并发的来源

系统并发的来源有：

1、中断。

2、内核态抢占。

3、smp多处理器。

### 4. linux的同步机制分类

1、关中断。

2、自旋锁及变种。

```
1、普通自旋锁 spinlock_t
2、读写自旋锁 rwlock
3、顺序自旋锁 seqlock
```

自旋锁的特点是空转。这种方式有些地方不能用。所以需要有信号量这种会导致sleep的来补充。

3、信号量及变种。

```
1、信号量。struct semaphore。
2、读写信号量。struct rw_semaphore
3、互斥信号量。就是count只能取值为0和1的sem。
```

4、互斥锁。

开始估计是没有互斥锁，所以用信号量来替代。后面linux还是引入了mutex。

5、RCU。

6、完成量complete。



### 参考资料

1、浅析Linux内核同步机制

https://blog.csdn.net/fzubbsc/article/details/37736683

